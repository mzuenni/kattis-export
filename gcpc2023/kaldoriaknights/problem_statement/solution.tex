\begin{frame}

  \frametitle{\problemtitle}

  \begin{block}{Problem}
    Given $a_1, \dots, a_k$, compute how many permutations of $(1,
    \dots, n)$ do not have
    $1, 2, \dots, \sum_{i=1}^l a_i$ (in some order) in the first
    $\sum_{i=1}^l a_i$ places (for some $l=1, \dots k$). 
  \end{block}
  \pause
	\begin{block}{Solution}

		\begin{itemize}
      \item<+-> Denote the number of such permutations by $p(n,k)$ and let
        $A(i) = \sum_{j=1}^i a_j$.
      \item<+-> Following the definition, we can count $p(n,k)$ as the
        number of \emph{all} permutations minus the forbidden ones.
      \item<+-> To avoid subtracting forbidden permutations more
        than once, we use a recursive formulation:
        \[
          p(n, k) = n! - \sum_{i=1}^k (n-A[i])! \times p(A[i], i-1)
        \]
      \item<+-> $p(A[i], i-1)$ counts the forbidden prefixes of length
        $A[i]$, which do not themselves contain a shorter forbidden
        prefix.
      \item<+-> The recursion can be evaluated using dynamic programming
        in time $\mathcal{O}(k^2)$.
		\end{itemize}

	\end{block}

\end{frame}
